# –û—Ç—á—ë—Ç: –§—É–Ω–∫—Ü–∏–∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤
**–î–∞—Ç–∞:** 2025-11-23  
**–í–µ—Ä—Å–∏—è:** M6  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ

---

## –ó–∞–¥–∞—á–∞

–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `src-tauri/src/db.rs`:
1. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∞–±–ª–∏—Ü—ã `states` (–ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å)
2. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ Net Worth –∫–∞–∫ —Å—É–º–º—ã –≤—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö –±–∞–ª–∞–Ω—Å–æ–≤ –ø–æ –≤—Å–µ–º –∞–∫–∫–∞—É–Ω—Ç–∞–º

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Backend (Rust)

#### 1. –§—É–Ω–∫—Ü–∏—è `get_account_balance`
**–§–∞–π–ª:** `src-tauri/src/db.rs`

```rust
pub fn get_account_balance(path: &str, key: &str, account_id: i64) -> Result<f64, DbError>
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—É—é –ë–î
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å: `SELECT balance FROM states WHERE account_id = ? ORDER BY ts DESC LIMIT 1`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –±–∞–ª–∞–Ω—Å –∏–ª–∏ `0.0` –µ—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç

**–õ–æ–≥–∏–∫–∞:**
- –ë–µ—Ä—ë—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å –∏–∑ `states` –ø–æ `account_id`
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `ts DESC` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
- Fallback –Ω–∞ `0.0` –¥–ª—è –Ω–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –±–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π

#### 2. –§—É–Ω–∫—Ü–∏—è `get_net_worth`
**–§–∞–π–ª:** `src-tauri/src/db.rs`

```rust
pub fn get_net_worth(path: &str, key: &str) -> Result<f64, DbError>
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—É—é –ë–î
- –í—ã–ø–æ–ª–Ω—è–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å —Å –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É–º–º—É –≤—Å–µ—Ö –±–∞–ª–∞–Ω—Å–æ–≤

**SQL-–∑–∞–ø—Ä–æ—Å:**
```sql
SELECT COALESCE(SUM(balance), 0.0) FROM (
    SELECT DISTINCT account_id, 
           (SELECT balance FROM states s2 
            WHERE s2.account_id = s1.account_id 
            ORDER BY ts DESC LIMIT 1) as balance
    FROM states s1
)
```

**–õ–æ–≥–∏–∫–∞:**
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–∞–µ—Ç `DISTINCT account_id` –∏–∑ `states`
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π `balance` (–ø–æ `ts DESC`)
- –í–Ω–µ—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å —Å—É–º–º–∏—Ä—É–µ—Ç –≤—Å–µ –±–∞–ª–∞–Ω—Å—ã
- `COALESCE(..., 0.0)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `0.0` –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–æ–≤

#### 3. Tauri –∫–æ–º–∞–Ω–¥—ã
**–§–∞–π–ª:** `src-tauri/src/db.rs`

```rust
#[tauri::command]
pub async fn get_account_balance_command(
    path: String, 
    key: String, 
    account_id: i64
) -> Result<f64, String>

#[tauri::command]
pub async fn get_net_worth_command(
    path: String, 
    key: String
) -> Result<f64, String>
```

#### 4. API –æ–±—ë—Ä—Ç–∫–∏
**–§–∞–π–ª:** `src-tauri/src/api.rs`

```rust
#[tauri::command]
pub async fn get_account_balance(
    app: tauri::AppHandle,
    account_id: i64,
) -> Result<f64, String>

#[tauri::command]
pub async fn get_net_worth(
    app: tauri::AppHandle
) -> Result<f64, String>
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ `db_path` –∏ `key` –∏–∑ `AppHandle`
- –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–±–µ–∑ —è–≤–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –ø—É—Ç–∏ –∏ –∫–ª—é—á–∞)

#### 5. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥
**–§–∞–π–ª:** `src-tauri/src/lib.rs`

```rust
.invoke_handler(tauri::generate_handler![
    // ...
    api::get_account_balance,
    api::get_net_worth,
    // ...
])
```

---

### Frontend (React + TypeScript)

#### 1. TypeScript –æ–±—ë—Ä—Ç–∫–∏
**–§–∞–π–ª:** `src/lib/tauri-commands.ts`

```typescript
// Aggregations
async getAccountBalance(accountId: number): Promise<number>
async getNetWorth(): Promise<number>
```

#### 2. –°–æ—Å—Ç–æ—è–Ω–∏—è –≤ App.tsx
**–§–∞–π–ª:** `src/App.tsx`

```typescript
const [accountBalances, setAccountBalances] = useState<Record<number, number>>({});
const [netWorth, setNetWorth] = useState<number>(0);
```

#### 3. –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ Net Worth
```typescript
const loadNetWorth = async () => {
  try {
    const worth = await api.getNetWorth();
    setNetWorth(worth);
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Net Worth:', error);
  }
};
```

#### 4. –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
```typescript
const loadAccounts = async () => {
  try {
    const accountsList = await api.listAccounts();
    setAccounts(accountsList);
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–ª–∞–Ω—Å—ã –¥–ª—è –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
    const balances: Record<number, number> = {};
    for (const acc of accountsList) {
      try {
        const balance = await api.getAccountBalance(acc.id);
        balances[acc.id] = balance;
      } catch {
        balances[acc.id] = 0;
      }
    }
    setAccountBalances(balances);
    
    setMessage("");
  } catch (error) {
    setMessage(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤: ${error}`);
  }
};
```

#### 5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π
```typescript
// –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
await api.addOperation(selectedAccountId, amount, operationDescription);
// ...
// –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ Net Worth
const newBalance = await api.getAccountBalance(selectedAccountId);
setAccountBalances(prev => ({ ...prev, [selectedAccountId]: newBalance }));
await loadNetWorth();
```

#### 6. UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Net Worth
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –•–µ–¥–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª)

```tsx
<div style={{ 
  padding: '10px 15px', 
  backgroundColor: '#f0f0f0', 
  border: '2px solid #4CAF50', 
  borderRadius: '8px',
  color: '#333',
  fontWeight: 'bold'
}}>
  Net Worth: {netWorth.toFixed(2)} ‚ÇΩ
</div>
```

**–î–∏–∑–∞–π–Ω:**
- –ó–µ–ª—ë–Ω–∞—è —Ä–∞–º–∫–∞ (`#4CAF50`)
- –°–µ—Ä—ã–π —Ñ–æ–Ω (`#f0f0f0`)
- –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç
- –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
- –í–∞–ª—é—Ç–∞: —Ä—É–±–ª–∏ (‚ÇΩ)

#### 7. UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (—Å–ø—Ä–∞–≤–∞ –æ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è)

```tsx
<div style={{ 
  fontSize: '18px', 
  fontWeight: 'bold', 
  color: (accountBalances[account.id] || 0) >= 0 ? '#4CAF50' : '#f44336' 
}}>
  {(accountBalances[account.id] || 0).toFixed(2)} ‚ÇΩ
</div>
```

**–î–∏–∑–∞–π–Ω:**
- –ö—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç (18px)
- –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - üü¢ **–ó–µ–ª—ë–Ω—ã–π** (`#4CAF50`) –¥–ª—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
  - üî¥ **–ö—Ä–∞—Å–Ω—ã–π** (`#f44336`) –¥–ª—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞
- –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Rust —Ç–µ—Å—Ç—ã
**–§–∞–π–ª:** `src-tauri/tests/test_aggregations.rs`

#### –°—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∞:
1. ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ 3 –∞–∫–∫–∞—É–Ω—Ç–æ–≤
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤ (–≤—Å–µ `0.0`)
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ Net Worth (`0.0`)
5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π:
   - `+1000.0` ‚Üí Account 1
   - `+500.0` ‚Üí Account 2
   - `-200.0` ‚Üí Account 1
   - `+300.0` ‚Üí Account 3
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤:
   - Account 1: `800.0` (1000 - 200)
   - Account 2: `500.0`
   - Account 3: `300.0`
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ Net Worth: `1600.0` (800 + 500 + 300)
8. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –µ—â—ë –æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:
   - `+100.0` ‚Üí Account 1
9. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ Account 1: `900.0`
10. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ Net Worth: `1700.0` (900 + 500 + 300)

#### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
```
‚úì Created 3 accounts: 1, 2, 3
‚úì Initial balances: 0, 0, 0
‚úì Initial net worth: 0
‚úì Added +1000.0 to account 1
‚úì Added +500.0 to account 2
‚úì Added -200.0 to account 1
‚úì Added +300.0 to account 3
‚úì Updated balances: 800, 500, 300
‚úì Updated net worth: 1600
‚úì Added +100.0 to account 1
‚úì Final balance 1: 900
‚úì Final net worth: 1700

‚úÖ All aggregation tests passed!
test test_aggregation_functions ... ok
```

---

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SQL:** –ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –ø–æ `account_id` –∏ `ts`
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ë–∞–ª–∞–Ω—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- **–¢–æ—á–µ—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –ü–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–π –∞–∫–∫–∞—É–Ω—Ç

### 2. –¢–æ—á–Ω–æ—Å—Ç—å
- **–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:** `f64` (double precision) –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ:** 2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π –≤ UI (`.toFixed(2)`)
- **Fallback:** `0.0` –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –±–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π

### 3. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** `Result<f64, DbError>` –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- **Graceful degradation:** UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `0.0` –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–ª–∞–Ω—Å–∞
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å:** –ë–∞–ª–∞–Ω—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ —á–µ—Ä–µ–∑ `add_operation`

### 4. UX/UI
- **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –ë–∞–ª–∞–Ω—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**
  - –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–µ–ª—ë–Ω—ã–π/–∫—Ä–∞—Å–Ω—ã–π)
  - –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π Net Worth –≤ —Ö–µ–¥–µ—Ä–µ
  - –£–¥–æ–±–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- **–ë–µ–∑ reload:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è state management –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–°–ª–æ–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
  ```
  UI (App.tsx)
    ‚Üì api.getAccountBalance/getNetWorth
  API Layer (api.rs)
    ‚Üì db::get_account_balance/get_net_worth
  DB Layer (db.rs)
    ‚Üì SQL queries
  SQLite (encrypted)
  ```
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
  - `db.rs` ‚Üí —á–∏—Å—Ç–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - `api.rs` ‚Üí –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Tauri
  - `App.tsx` ‚Üí UI –∏ state management

---

## –ú–∏–≥—Ä–∞—Ü–∏–∏

–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è. –§—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É `states`:

```sql
CREATE TABLE states (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    account_id INTEGER NOT NULL,
    balance REAL NOT NULL,
    ts INTEGER NOT NULL,
    UNIQUE(account_id, ts)
);
```

---

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Backend
- ‚úÖ `src-tauri/src/db.rs` ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ `get_account_balance`, `get_net_worth`
- ‚úÖ `src-tauri/src/api.rs` ‚Äî –æ–±—ë—Ä—Ç–∫–∏ API
- ‚úÖ `src-tauri/src/lib.rs` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥
- ‚úÖ `src-tauri/tests/test_aggregations.rs` ‚Äî –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### Frontend
- ‚úÖ `src/lib/tauri-commands.ts` ‚Äî TypeScript –æ–±—ë—Ä—Ç–∫–∏
- ‚úÖ `src/App.tsx` ‚Äî UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ª–æ–≥–∏–∫–∞

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤

```
Compiling: 6.15s
Running tests: 6.71s
Total: 12.86s
Result: ‚úÖ 1 passed, 0 failed
```

---

## –ò—Ç–æ–≥–∏

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
‚úÖ –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏–∑ `states` (–ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å)  
‚úÖ –§—É–Ω–∫—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è Net Worth (—Å—É–º–º–∞ –≤—Å–µ—Ö –±–∞–ª–∞–Ω—Å–æ–≤)  
‚úÖ Tauri –∫–æ–º–∞–Ω–¥—ã –∏ API –æ–±—ë—Ä—Ç–∫–∏  
‚úÖ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã  
‚úÖ UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Net Worth –≤ —Ö–µ–¥–µ—Ä–µ (—Å –∑–µ–ª—ë–Ω–æ–π —Ä–∞–º–∫–æ–π)  
‚úÖ UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –≤ —Å–ø–∏—Å–∫–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (—Ü–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ)  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π  
‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (10 –ø—Ä–æ–≤–µ—Ä–æ–∫)  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∫–æ–º–º–∏—Ç  

### –°—Ç–∞—Ç—É—Å:
üü¢ **PRODUCTION READY**

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –±–∞–ª–∞–Ω—Å–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è Net Worth
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –±–∞–ª–∞–Ω—Å–æ–≤ –≤ CSV/JSON
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤–∞–ª—é—Ç —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π

